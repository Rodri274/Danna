<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Para Danna üíú</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&family=Great+Vibes&display=swap" rel="stylesheet"/>

<style>
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  -webkit-tap-highlight-color:transparent;
  user-select:none;
  -webkit-user-select:none;
}

html,body{
  width:100%;
  height:100%;
}

body{
  position:relative;
  overflow:hidden;
  font-family:"Poppins",system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
  color:#fff;
  background:
    radial-gradient(circle at top,#c789ff 0,transparent 55%),
    radial-gradient(circle at bottom,#3a0260 0,#060010 55%);
  -webkit-font-smoothing:antialiased;
  touch-action:manipulation;
}

/* brillo suave general */
body::before{
  content:"";
  position:fixed;
  inset:-20%;
  background:radial-gradient(circle at 50% 35%,#ffdfff35 0,transparent 60%);
  pointer-events:none;
  z-index:0;
}

/* ---------- INTRO (PANTALLA 1) ---------- */

#intro{
  position:absolute;
  inset:0;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-start;
  padding-top:48px;
  text-align:center;
  z-index:20;
  background:radial-gradient(circle at top,#d39bff 0,#2a013e 70%);
  transition:opacity .6s ease;
}
#intro.hidden{
  opacity:0;
  pointer-events:none;
}

/* sello dorado */
.sello-wrapper{
  margin-top:12px;
  display:flex;
  flex-direction:column;
  align-items:center;
}

.sello-outer{
  width:220px;
  height:220px;
  border-radius:50%;
  background:radial-gradient(circle at 30% 30%,#ffe39a,#d39b00 65%,#a56a00 100%);
  box-shadow:0 14px 30px #0007;
  display:flex;
  align-items:center;
  justify-content:center;
  position:relative;
}

.sello-inner{
  width:150px;
  height:150px;
  border-radius:50%;
  background:radial-gradient(circle at 30% 30%,#f7ddff,#a95fff);
  box-shadow:inset 0 0 25px #0005;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:6px;
  position:relative;
}

/* letras D y R dentro del c√≠rculo morado */
.sello-letter{
  font-family:"Great Vibes",cursive;
  font-size:3.4rem;
  color:#ffffff;
  text-shadow:0 0 10px #fff8;
}

/* coraz√≥n animado entre D y R */
.sello-heart{
  font-size:2.2rem;
  color:#c052ff;
  text-shadow:0 0 16px #ffcbff;
  animation:latido 1.8s infinite ease-in-out;
}

@keyframes latido{
  0%{transform:scale(1);}
  25%{transform:scale(1.18);}
  50%{transform:scale(1);}
  75%{transform:scale(1.18);}
  100%{transform:scale(1);}
}

/* nombre y textos intro */

.intro-name{
  font-family:"Great Vibes",cursive;
  font-size:2.7rem;
  margin-top:26px;
}

.intro-text{
  font-size:1rem;
  line-height:1.55;
  padding:0 24px;
  margin-top:18px;
  max-width:340px;
}

.intro-text b{
  font-weight:600;
}

.intro-hint{
  font-size:.82rem;
  opacity:.85;
  margin-top:18px;
}

/* ---------- MAIN (PANTALLA 2) ---------- */

#main{
  position:absolute;
  inset:0;
  opacity:0;
  pointer-events:none;
  transition:opacity .7s ease;
}
#main.visible{
  opacity:1;
  pointer-events:auto;
}

/* carta principal */
.card{
  position:absolute;
  left:50%;
  top:45%;
  transform:translate(-50%,-50%);
  width:min(320px,90vw);
  background:linear-gradient(145deg,#1a0529ee,#080012f2);
  border-radius:26px;
  padding:18px 18px 12px;
  box-shadow:0 22px 45px #000000dd;
  backdrop-filter:blur(20px);
  text-align:center;
  z-index:4;
  animation:cardPop .9s ease-out both;
}
.card::before{
  content:"";
  position:absolute;
  inset:0;
  border-radius:inherit;
  padding:1px;
  background:linear-gradient(135deg,#ffe9ffa0,#9960ffa0);
  -webkit-mask:
    linear-gradient(#000 0 0) content-box,
    linear-gradient(#000 0 0);
  -webkit-mask-composite:xor;
          mask-composite:exclude;
  pointer-events:none;
}
@keyframes cardPop{
  0%{transform:translate(-50%,-50%) scale(.7);opacity:0;}
  100%{transform:translate(-50%,-50%) scale(1);opacity:1;}
}
.card-tag{
  font-size:.64rem;
  letter-spacing:.16em;
  opacity:.85;
  margin-bottom:6px;
}
.card-title{
  font-size:.9rem;
}
.card-name{
  font-family:"Great Vibes",cursive;
  font-size:2rem;
  color:#f0cbff;
  margin-top:4px;
  margin-bottom:4px;
}
.card-heart{
  font-size:1.5rem;
  margin-bottom:8px;
}
.card-sub{
  font-size:.75rem;
  opacity:.9;
  margin-bottom:10px;
}
.card-msg{
  font-size:.73rem;
  line-height:1.55;
  text-align:left;
  margin-bottom:10px;
}
.card-sign{
  font-size:.73rem;
  text-align:left;
}
.card-sign span{
  color:#e9b4ff;
}
.card-note{
  margin-top:8px;
  font-size:.6rem;
  opacity:.8;
}

/* ---------- CRISTALES MORADOS (cartitas) ---------- */
.note{
  position:absolute;
  width:160px;
  padding:8px 10px;
  border-radius:14px;
  background:rgba(255,255,255,0.10);
  border:1px solid rgba(255,255,255,.22);
  backdrop-filter:blur(10px);
  font-size:.7rem;
  color:#ffe9ff;
  box-shadow:0 10px 25px #000000aa;
  transform:rotate(var(--rot));
  animation:noteFall linear forwards;
  z-index:6;
  pointer-events:none;
}

.note.note-ring{
  z-index:8;
}

@keyframes noteFall{
  0%{
    transform:translateY(-15vh) rotate(var(--rot));
    opacity:0;
  }
  15%{opacity:1;}
  85%{
    transform:translateY(110vh) rotate(calc(var(--rot) + 6deg));
    opacity:1;
  }
  100%{
    transform:translateY(115vh) rotate(calc(var(--rot) + 8deg));
    opacity:0;
  }
}

/* ---------- CORAZONES EN EL TOQUE ---------- */
.heart{
  position:fixed;
  font-size:1.6rem;
  filter:drop-shadow(0 0 10px #ffb8ff);
  pointer-events:none;
  z-index:9;
  transform:translate(-50%,-50%);
  animation:heartFloat 2.6s ease-out forwards;
}
@keyframes heartFloat{
  0%{opacity:0;transform:translate(-50%,-40%) scale(.7);}
  20%{opacity:1;}
  100%{opacity:0;transform:translate(-50%,-160%) scale(1.25);}
}

/* ---------- EFECTO M√ÅGICO LONG PRESS ---------- */
.magic-halo{
  position:fixed;
  width:220px;
  height:220px;
  border-radius:50%;
  pointer-events:none;
  z-index:10;
  background:radial-gradient(circle,#ffe6ffcc 0,#c17bff80 40%,transparent 70%);
  transform:translate(-50%,-50%) scale(0.7);
  opacity:0;
  animation:haloPulse 2.4s ease-out forwards;
}
@keyframes haloPulse{
  0%{opacity:0;transform:translate(-50%,-50%) scale(0.6);}
  25%{opacity:1;transform:translate(-50%,-50%) scale(1);}
  70%{opacity:1;transform:translate(-50%,-50%) scale(1.05);}
  100%{opacity:0;transform:translate(-50%,-50%) scale(1.1);}
}

.magic-message{
  position:fixed;
  max-width:270px;
  padding:11px 16px;
  border-radius:18px;
  background:rgba(10,0,30,0.96);
  border:1px solid rgba(255,255,255,0.3);
  box-shadow:0 18px 35px #000000e0;
  text-align:center;
  font-size:.8rem;
  line-height:1.4;
  pointer-events:none;
  z-index:11;
  transform:translate(-50%,-50%) scale(0.85);
  opacity:0;
  animation:magicMsg 3s ease-out forwards;
}
@keyframes magicMsg{
  0%{opacity:0;transform:translate(-50%,-50%) scale(0.85);}
  15%{opacity:1;transform:translate(-50%,-50%) scale(1);}
  80%{opacity:1;}
  100%{opacity:0;transform:translate(-50%,-50%) scale(0.97);}
}
.magic-message span{
  font-family:"Great Vibes",cursive;
  font-size:1.3rem;
  display:block;
  margin-bottom:4px;
}
</style>
</head>

<body oncontextmenu="return false;">

<!-- INTRO -->
<section id="intro">
  <div class="sello-wrapper">
    <div class="sello-outer">
      <div class="sello-inner">
        <span class="sello-letter">D</span>
        <span class="sello-heart">üíú</span>
        <span class="sello-letter">R</span>
      </div>
    </div>
  </div>

  <div class="intro-name">Danna</div>

  <p class="intro-text">
    300 d√≠as despu√©s, t√∫ sigues siendo <b>mi parte favorita del a√±o</b>.
    Por eso quise empezar este A√±o Nuevo con un peque√±o detalle para ti.
    Toca la pantalla cuando quieras. üíú
  </p>

  <div class="intro-hint">
    (Toca en cualquier parte para empezar)
  </div>
</section>

<!-- MAIN -->
<section id="main">
  <article class="card">
    <div class="card-tag">300 d√≠as con la ni√±a que me encanta ‚ú®</div>

    <div class="card-title">Feliz A√±o Nuevo</div>
    <div class="card-name">Danna</div>
    <div class="card-heart">üíú</div>

    <div class="card-sub">
      Todo lo que ves flotando aqu√≠ son cosas que pienso, siento y deseo para ti.
    </div>

    <div class="card-msg">
      Danna, quer√≠a que este A√±o Nuevo empezara con algo que te recordara
      lo incre√≠blemente valiosa que eres para m√≠.<br><br>
      Ojal√° este a√±o te cuide bonito, que te d√© claridad, calma y que est√© lleno
      de todo el √©xito que t√∫ mereces.<br><br>
      Y si la vida decide seguir junt√°ndonos, ojal√° tambi√©n me deje regalarte
      m√°s momentos que te hagan sentir especial‚Ä¶ porque t√∫ haces que mis d√≠as
      lo sean sin siquiera intentarlo.
    </div>

    <div class="card-sign">
      Con much√≠simo cari√±o,<br>
      <span>Rodrigo</span> ü´∂
    </div>

    <div class="card-note">
      La pantalla se va a ir llenando solita de cristales morados,
      y cuando la toques van a aparecer corazoncitos justo donde pongas tu dedo üíú
    </div>
  </article>
</section>

<script>
let universeStarted = false;
let lastTapTime = 0;
let activeNotes = [];

let longPressTimer = null;
let longPressTriggered = false;
let lastTouchPos = {x:0,y:0};
let touchStartPos = {x:0,y:0};
let isTouchDevice = false;

const intro = document.getElementById("intro");
const main  = document.getElementById("main");

/* -------- FRASES (tus 66) -------- */
const notePhrases = [
  "Eres lo m√°s bonito que me pas√≥ este a√±o.",
  "Cuando pienso en el pr√≥ximo a√±o, te imagino ah√≠.",
  "Me derrite cuando me sacas la lengua y te r√≠es.",
  "Me fascinan tus besos.",
  "Tus abrazos largos son lo mejor del universo.",
  "Tu risa es mi sonido favorito.",
  "Gracias por quedarte incluso en mis d√≠as raros.",
  "Amo tu cabello chinito.",
  "El universo se luci√≥ al cruzarte en mi vida.",
  "Me gustas mucho m√°s de lo que imaginas.",
  "La conexi√≥n contigo es s√∫per m√°gica.",
  "Me haces muy feliz.",
  "Irradias una energ√≠a muy linda.",
  "Besas de lo m√°s ricoooo.",
  "Si lees esto me debes 1000 besos s√∫per largos y delis",
  "Me gusta c√≥mo me miras cuando crees que no me doy cuenta.",
  "Eres una persona s√∫per valiosa para m√≠.",
  "Siempre me haces querer quedarme un ratito m√°s.",
  "Me encanta lo que provocas en m√≠.",
  "Adoro verte feliz.",
  "Quisiera abrazarte todos los d√≠as.",
  "Me gusta tu locura.",
  "Eres preciosa de todas las formas posibles.",
  "Quisiera m√°s ratitos contigo.",
  "Amo escucharte cantar en la oficina.",
  "Me encanta tenerte cerquita de m√≠.",
  "Me atraes much√≠simo.",
  "Me provocas cosas que no puedo explicar.",
  "Me encantar√≠a besarte siempre.",
  "Amo tus preentrenos de una sola vez.",
  "Tu presencia me acelera el coraz√≥n.",
  "Hay algo en ti que no puedo evitar desear.",
  "Me inspiras a ser mejor persona.",
  "Me siento afortunado por conocerte.",
  "Quisiera que te gustara compartir tiempo conmigo.",
  "Te admiro much√≠simo.",
  "Me importas un mont√≥n.",
  "Eres una persona que vale much√≠simo la pena.",
  "Me gusta imaginarnos juntos.",
  "Qu√©date conmigo muchas vidas.",
  "Coincidir contigo no fue casualidad.",
  "Contigo todo es lindo.",
  "Tu vibra es preciosa.",
  "Tu boquita me derrite.",
  "Me atraes de todas las formas posibles.",
  "Amo hasta molestarte cuando subes escaleras.",
  "Te ves preciosa de cualquier √°ngulo.",
  "Me fascina c√≥mo hablas.",
  "Me encanta cuando me pateas con amor.",
  "Gracias por existir.",
  "Ojal√° te quedaras conmigo siempre.",
  "Siempre me mejoras el d√≠a.",
  "Me encanta tomarte de la mano.",
  "Tienes el tono de voz perfecto.",
  "S√≥lo t√∫ puedes lograr que pintar banquetas sea especial.",
  "Adoro tu espontaneidad.",
  "Es lindo molestarte mientras haces el s√∫per.",
  "Eres irresistible y ni siquiera lo intentas.",
  "Me encanta cuando paras tu trompita.",
  "A veces siento que t√∫ y yo ya nos conoc√≠amos.",
  "Amo cuando te acomodas el cabello.",
  "Me encantan tus ocurrencias inesperadas.",
  "Dibujas bien padre.",
  "Me encanta c√≥mo dices las cosas cuando te apasionan.",
  "Eres m√°s especial de lo que crees.",
  "Amo saludarte m√°s de una vez y que finjas demencia.",
  "Ojal√° te dieras la oportunidad de ver lo que yo veo en nosotros."
];

/* ---- barajado sin repeticiones hasta acabar el ciclo ---- */
let phraseDeck = [];

function shuffleDeck(){
  phraseDeck = [...Array(notePhrases.length).keys()];
  for(let i = phraseDeck.length - 1; i > 0; i--){
    const j = Math.floor(Math.random() * (i + 1));
    [phraseDeck[i], phraseDeck[j]] = [phraseDeck[j], phraseDeck[i]];
  }
}

function getRandomPhrase(){
  if(phraseDeck.length === 0){
    shuffleDeck();
  }
  const index = phraseDeck.shift();
  return notePhrases[index];
}

function startUniverse(){
  if(universeStarted) return;
  universeStarted = true;
  intro.classList.add("hidden");
  main.classList.add("visible");
}

function rand(min,max){ return Math.random()*(max-min)+min; }

/* crea un cristal SIEMPRE dentro de la pantalla */
function createNote(fromTapX, fromTapY, isRing){
  if(!universeStarted) return;

  const note = document.createElement("div");
  note.className = "note";
  if(isRing){
    note.classList.add("note-ring");
  }
  note.textContent = getRandomPhrase();

  const rot = rand(-6, 6);
  note.style.setProperty("--rot", rot + "deg");

  const dur = rand(11, 15);
  note.style.animationDuration = dur + "s";

  document.body.appendChild(note);

  const rect = note.getBoundingClientRect();
  const noteW = rect.width || 160;
  const noteH = rect.height || 60;
  const vw = window.innerWidth;
  const vh = window.innerHeight;

  const marginX = 8;
  const marginTop = 8;
  const marginBottom = 8;

  let leftPx, topPx;

  if(typeof fromTapX === "number" && typeof fromTapY === "number"){
    leftPx = fromTapX - noteW / 2;
    topPx  = fromTapY - noteH / 2;
  } else {
    leftPx = rand(marginX, vw - noteW - marginX);
    topPx  = -noteH - 40;
  }

  if(leftPx < marginX) leftPx = marginX;
  if(leftPx > vw - noteW - marginX) leftPx = vw - noteW - marginX;

  if(topPx < -noteH - 60) topPx = -noteH - 60;
  if(topPx > vh - noteH - marginBottom) topPx = vh - noteH - marginBottom;

  note.style.left = leftPx + "px";
  note.style.top  = topPx + "px";

  activeNotes.push(note);

  const maxNotes = 8;
  if(activeNotes.length > maxNotes){
    const old = activeNotes.shift();
    if(old) old.remove();
  }

  setTimeout(()=>{
    note.remove();
    activeNotes = activeNotes.filter(n => n !== note);
  }, dur*1000 + 800);
}

/* lluvia suave autom√°tica de cristales */
setInterval(()=>{
  createNote();
}, 3800);

/* corazones en el toque */
function spawnHearts(x,y){
  if(!universeStarted) return;

  const heartsToCreate = 3;
  for(let i=0;i<heartsToCreate;i++){
    const h = document.createElement("div");
    h.className = "heart";
    h.textContent = "üíú";

    const offsetX = rand(-18,18);
    const delay   = i * 80;

    h.style.left = (x + offsetX) + "px";
    h.style.top  = y + "px";
    h.style.animationDuration = rand(2.2,2.9) + "s";

    setTimeout(()=>{
      document.body.appendChild(h);
    }, delay);

    setTimeout(()=>{
      h.remove();
    }, delay + 3000);
  }
}

/* toque corto -> corazones */
function handleTap(x,y){
  if(!universeStarted) return;
  const now = Date.now();
  if(now - lastTapTime < 250) return;
  lastTapTime = now;
  spawnHearts(x,y);
}

/* efecto m√°gico long press */
function triggerMagic(x,y){
  if(!universeStarted) return;

  const halo = document.createElement("div");
  halo.className = "magic-halo";
  halo.style.left = x + "px";
  halo.style.top  = y + "px";
  document.body.appendChild(halo);
  setTimeout(()=>halo.remove(), 2500);

  const msg = document.createElement("div");
  msg.className = "magic-message";
  msg.style.left = "50%";
  msg.style.top  = "50%";
  msg.innerHTML = `
    <span>Danna</span>
    Eres mi deseo m√°s bonito de A√±o Nuevo.
    Gracias por seguir en mi vida. üíú
  `;
  document.body.appendChild(msg);
  setTimeout(()=>msg.remove(), 3000);

  const count = 10;
  const radius = 150;
  for(let i=0;i<count;i++){
    const angle = (2*Math.PI * i)/count;
    const px = x + radius * Math.cos(angle);
    const py = y + radius * Math.sin(angle);
    createNote(px, py, true);
  }
}

/* ---------- TOUCH (m√≥vil) ---------- */
document.addEventListener("touchstart", (e)=>{
  isTouchDevice = true;
  if(!universeStarted) startUniverse();

  if(e.touches.length > 0){
    const t = e.touches[0];
    lastTouchPos = {x:t.clientX,y:t.clientY};
    touchStartPos = {x:t.clientX,y:t.clientY};
    longPressTriggered = false;

    e.preventDefault();

    if(longPressTimer){
      clearTimeout(longPressTimer);
      longPressTimer = null;
    }

    longPressTimer = setTimeout(()=>{
      longPressTriggered = true;
      triggerMagic(lastTouchPos.x,lastTouchPos.y);
    }, 2000);
  }
},{passive:false});

document.addEventListener("touchmove",(e)=>{
  if(e.touches.length > 0){
    const t = e.touches[0];
    lastTouchPos = {x:t.clientX,y:t.clientY};

    const dx = lastTouchPos.x - touchStartPos.x;
    const dy = lastTouchPos.y - touchStartPos.y;
    const dist = Math.sqrt(dx*dx + dy*dy);
    if(dist > 25 && longPressTimer){
      clearTimeout(longPressTimer);
      longPressTimer = null;
    }
  }
},{passive:false});

function clearLongPress(){
  if(longPressTimer){
    clearTimeout(longPressTimer);
    longPressTimer = null;
  }
}

document.addEventListener("touchend",()=>{
  if(!longPressTimer && !longPressTriggered) return;

  clearLongPress();

  if(!longPressTriggered){
    handleTap(lastTouchPos.x,lastTouchPos.y);
  }
});

/* ---------- POINTER (PC) ---------- */
function onPointerDown(e){
  if(isTouchDevice) return;
  if(!universeStarted){
    startUniverse();
  }

  longPressTriggered = false;
  lastTouchPos = {x:e.clientX, y:e.clientY};
  touchStartPos = {x:e.clientX, y:e.clientY};

  longPressTimer = setTimeout(()=>{
    longPressTriggered = true;
    triggerMagic(lastTouchPos.x, lastTouchPos.y);
  }, 2000);
}

function onPointerUp(e){
  if(isTouchDevice) return;
  if(!longPressTimer && !longPressTriggered) return;

  clearLongPress();

  if(!longPressTriggered){
    handleTap(e.clientX, e.clientY);
  }
}

document.addEventListener("pointerdown", onPointerDown);
document.addEventListener("pointerup", onPointerUp);
document.addEventListener("pointercancel", onPointerUp);
document.addEventListener("pointerleave", onPointerUp);

/* inicia el mazo de frases */
shuffleDeck();
</script>

</body>
</html>